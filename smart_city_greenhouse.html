<!DOCTYPE html>
<html>
  <head>
    <title>Smart City Greenhouse</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <link href="data/apple-touch-icon.png" rel="apple-touch-icon"/>
    <link href="resources/css/axure_rp_page.css" type="text/css" rel="stylesheet"/>
    <link href="data/styles.css" type="text/css" rel="stylesheet"/>
    <link href="files/smart_city_greenhouse/styles.css" type="text/css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,300i,400,400i,700,700i" type="text/css" rel="stylesheet"/>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" type="text/css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i" type="text/css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Cormorant+Garamond:300,300i,400,400i,500,500i,600,600i,700,700i" type="text/css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&subset=cyrillic,cyrillic-ext,latin-ext,vietnamese" type="text/css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Oswald:200,300,400,500,600,700&amp;subset=cyrillic,latin-ext,vietnamese" rel="stylesheet"" type="text/css" rel="stylesheet"/>
    <script src="resources/scripts/jquery-1.7.1.min.js"></script>
    <script src="resources/scripts/jquery-ui-1.8.10.custom.min.js"></script>
    <script src="resources/scripts/prototypePre.js"></script>
    <script src="data/document.js"></script>
    <script src="resources/scripts/prototypePost.js"></script>
    <script src="files/smart_city_greenhouse/data.js"></script>
    <script type="text/javascript">
      $axure.utils.getTransparentGifPath = function() { return 'resources/images/transparent.gif'; };
      $axure.utils.getOtherPath = function() { return 'resources/Other.html'; };
      $axure.utils.getReloadPath = function() { return 'resources/reload.html'; };
    </script>
  </head>
  <body>
    <div id="base" class="">

      <!-- Bkg (Dynamic Panel) -->
      <div id="u54" class="ax_default" data-label="Bkg">
        <div id="u54_state0" class="panel_state" data-label="State1" style="">
          <div id="u54_state0_content" class="panel_state_content">
          </div>
        </div>
      </div>

      <!-- CaterImg (Dynamic Panel) -->
      <div id="u55" class="ax_default" data-label="CaterImg">
        <div id="u55_state0" class="panel_state" data-label="State1" style="">
          <div id="u55_state0_content" class="panel_state_content">
          </div>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u56" class="ax_default box_1">
        <img id="u56_img" class="img " src="images/smart_city_greenhouse/u56.png"/>
      </div>

      <!-- Project Title (Rectangle) -->
      <div id="u57" class="ax_default heading_1" data-label="Project Title">
        <div id="u57_div" class=""></div>
        <div id="u57_text" class="text ">
          <p><span>SMART CITY GREENHOUSE</span></p>
        </div>
      </div>

      <!-- Overlay (Dynamic Panel) -->
      <div id="u58" class="ax_default" data-label="Overlay">
        <div id="u58_state0" class="panel_state" data-label="State1" style="">
          <div id="u58_state0_content" class="panel_state_content">

            <!-- Unnamed (Dynamic Panel) -->
            <div id="u59" class="ax_default">
              <div id="u59_state0" class="panel_state" data-label="State1" style="">
                <div id="u59_state0_content" class="panel_state_content">

                  <!-- Unnamed (Dynamic Panel) -->
                  <div id="u60" class="ax_default">
                    <div id="u60_state0" class="panel_state" data-label="State1" style="">
                      <div id="u60_state0_content" class="panel_state_content">

                        <!-- Unnamed (Rectangle) -->
                        <div id="u61" class="ax_default paragraph">
                          <div id="u61_div" class=""></div>
                          <div id="u61_text" class="text ">
                            <p><span>The Smart City Greenhouse is a physical computing project that responds to changes in the environment and the needs of living plants. I participated in the design and implementation with one other team member, </span><a id="u62" class="link"><span style="color:#4B2E83;">Zhuo Luo</span></a><span>. </span></p>
                          </div>
                        </div>

                        <!-- Unnamed (Rectangle) -->
                        <div id="u63" class="ax_default paragraph">
                          <div id="u63_div" class=""></div>
                          <div id="u63_text" class="text ">
                            <p style="font-size:20px;"><span style="font-family:'CormorantGaramond-Bold', 'Cormorant Garamond Bold', 'Cormorant Garamond';font-weight:700;">Implementation</span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;">The Smart Greenhouse receives alert messages from the Smart City gateway library, designed and implemented by </span><a id="u64" class="link"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;color:#4B2E83;">Andrew Davidson</span></a><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;">. This is made possible using an Xbee wireless transmitter/receiver. The transmitter/receiver uses pins 0 and 1, which serve as a serial port for incoming data. Adafruit calls the Powerswitch Tail “a safer alternative to wiring up your own relays”. It switches 120V AC power using a microcontroller i/o pin and is rated between 3-12V DC and between 3-30 milliamps. We used one of our non-PWM pins to control the relay, and hence the small aquatic air-pump it was plugged into, in order to inflate a raft beneath the structure. This was as simple as the Blink example from the Arduino Example library, and an “if” statement that waited for the alert to be read. The peristaltic pump uses 12V of electricity. To run it we used an h-bridge motor driver and wired it to the Vin+ pin following an example tutorial from NYU’s ITP Physical Computing page.</span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;">&nbsp;&nbsp; &nbsp; To measure ambient sunlight , we used a photocell and set a threshold value at around 700 analog output, just over half of the sensor’s maximum value. Using this threshold value in another “if” statement, the photocell sensor activates a series of 3 LEDs that are run off of a single digital pin. We used TMP36 analog temperature sensor wired to one of the analog input pins to tell the micro-servo when to ventilate the structure by raising part of its rooftop or to conserve energy by lowering or closing it. We used example Arduino code similar to this example from Adafruit to convert these values, first to voltage, then to degrees Celsius and finally degrees Fahrenheit. We then created 3 values that correspond with predetermined temperature intervals. Monitoring for changes in these interval values, the micro servo responds by lifting the roof fully when the Greenhouse exceeds temperatures of 54 degrees, half way when temps are between 50 and 54 degrees, and closes when the temp drops to 49 degrees or below. To smooth out this transition, the micro-servo only responds if the interval value has not changed for at least 5 seconds. Using an LCD screen, our Smart Greenhouse displays either a “Good Morning” message or “Good Night”. It displays “Water On” when the peristaltic pump is running, and “Water Off” when it has finished. It also displays the temperature and roof state after it has changed. In the case that the Greenhouse receives a Flood alert, the LCD screen displays the message “Alert!!! Flood, Hold On” and the case of Fire, simply reads “Alert!!! Fire”.</span></p>
                          </div>
                        </div>

                        <!-- Unnamed (Image) -->
                        <div id="u65" class="ax_default image">
                          <img id="u65_img" class="img " src="images/smart_city_greenhouse/u65.jpg"/>
                        </div>

                        <!-- Unnamed (Image) -->
                        <div id="u66" class="ax_default image">
                          <img id="u66_img" class="img " src="images/smart_city_greenhouse/u66.jpg"/>
                        </div>

                        <!-- Unnamed (Image) -->
                        <div id="u67" class="ax_default image">
                          <img id="u67_img" class="img " src="images/smart_city_greenhouse/u67.jpg"/>
                        </div>

                        <!-- Unnamed (Rectangle) -->
                        <div id="u68" class="ax_default paragraph">
                          <div id="u68_div" class=""></div>
                          <div id="u68_text" class="text ">
                            <p style="font-size:20px;"><span style="font-family:'CormorantGaramond-Bold', 'Cormorant Garamond Bold', 'Cormorant Garamond';font-weight:700;">Software</span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;">Because we had difficulty integrating a Real Time Clock into our build, we relied on measuring the time, in milliseconds, between passing events such as the day and night time functions, which we set at 60 seconds each in order to demonstrate our project in a brief setting. We did this by assigning an unsigned long to the initial timing of an event, and then resetting the value after using it to measure the duration of passing time between the component’s next state. Because we had so many separately timed parts, there are at least 2 unsigned longs associated with each working part. We also created separate “if” statement clauses to handle the Smart City Alerts independent of the other logical steps. In the case of Fire, the “if” statement overrides any other activity and resumes several seconds later.</span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;text-decoration:underline;">Sketch Code</span><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;">: Due to its length the sketch code is located at the end of this entry, after the “Helpful Links” section.</span></p>
                          </div>
                        </div>

                        <!-- Unnamed (Image) -->
                        <div id="u69" class="ax_default image">
                          <img id="u69_img" class="img " src="images/smart_city_greenhouse/u69.jpg"/>
                        </div>

                        <!-- Unnamed (Rectangle) -->
                        <div id="u70" class="ax_default paragraph">
                          <div id="u70_div" class=""></div>
                          <div id="u70_text" class="text ">
                            <p style="font-size:14px;"><span style="font-family:'CormorantGaramond-Bold', 'Cormorant Garamond Bold', 'Cormorant Garamond';font-weight:700;font-size:20px;">Sketch Code</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">#include &lt;Servo.h&gt;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">#include &lt;LiquidCrystal.h&gt;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">#include &lt;SmartCityNodeLib.h&gt;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">LiquidCrystal lcd(12, 11, 7, 6, 5, 4);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">SmartCityNode myNode;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">SoftwareSerial mySerial(10,9);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Servo myservo;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">const int sensorPin = A0; //Temperature Sensor</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">const int photoPin = A1; //Photocell</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">const int ledPin = A3; // LED’s</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">const int motor1Pin = 8;&nbsp;&nbsp; // H-bridge leg 1 (pin 2, 1A)</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">const int enablePin = 9;&nbsp;&nbsp; // H-bridge leg 2 (pin 7, 2A)</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">const int motor2Pin = 10;&nbsp;&nbsp; // H-bridge enable pin</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">const int powerPin = 13;&nbsp;&nbsp; //Powerswitch Relay 120v</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int photoVal = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//int ledoutVal = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int sensorVal = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int Voltage = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int tempF = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int tempC = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int outVal = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int lastTemp = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int intervalNumber = 0; //Arbitrary numbers for separate temperature intervals</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int previousIntervalNum = 0; //variable for previous interval number to monitor for change</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int enablePinState = HIGH; //variable for switching the h-bridge on and off</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long previousTime = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long prevpowerTime = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long currentMillis = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long previousMillis = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long currentWaterMillis = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long previousWaterMillis = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long airOnTime = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long previousAirMillis = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long waterOnTime = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long currentLcdMillis = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long previousLcdMillis = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int powerPinState = HIGH; //variable for switching the powerswitch tail on and off</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">long tempInterval = 5000; //Interval of time that must pass w/temp interval unchanged&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">bool dayVal = true; //Variable for switching between night and day functions</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//some constants to identify my node to the library object</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">const String myNodeName = &quot;Andy's Office&quot;;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">const int myZone = SmartCityNode::INDUSTRIAL; // declare what zone you are</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//const int btnPin = 7;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//set up a button to use for input</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//Button button(btnPin);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//state variables</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">boolean myDebugging = true;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">void setup() {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">// just for our own debugging</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.begin(9600);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.println(&quot;\n\n*** Starting SmartCityNode demo&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">myservo.attach(A2);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">pinMode(ledPin, OUTPUT);&nbsp; &nbsp; &nbsp; </span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">pinMode(motor1Pin, OUTPUT);&nbsp;&nbsp; //These variable assignments are taken directly from</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">pinMode(motor2Pin, OUTPUT);&nbsp; &nbsp; //the NYU example mentioned above</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">pinMode(enablePin, OUTPUT);&nbsp; &nbsp;&nbsp; //</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">pinMode(ledPin, OUTPUT);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">pinMode(powerPin, OUTPUT);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">// set enablePin high so that motor can turn on:</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//digitalWrite(enablePin, HIGH);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">// just flash it for a second at startup so we know things have initialized</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">digitalWrite(ledPin, HIGH);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">delay(1000);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">digitalWrite(ledPin, LOW);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">// comment this line out to suppress debugging messages from the library</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">myNode.setDebugOn();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">myNode.begin(myZone, myNodeName);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//Initialize LCD with indication of daytime function</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">lcd.begin(20, 2);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">lcd.print(&quot;GOODING!&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">lcd.setCursor(1,1);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">lcd.print(&quot;WATER;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">}</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">void loop() {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">// check for an incoming alert</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">// alertReceived() returns 0 (zero) if none have been sent to your zone.</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">// it returns a code as follows if there is one:</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::FIRE</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::GAS</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::FLOOD</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::BURGLARY</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::EARTHQUAKE</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::ZOMBIE</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::CONTAINMENT_BREACH</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::HIPSTER_INVASION</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::UNWANTED_SOLICITORS</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::BLACK_FRIDAY</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::CUTE_ANIMALS</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::APOCALYPSE</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int alert = myNode.alertReceived();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//while (alert != SmartCityNode::FIRE) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">if (alert != 0) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp;&nbsp; in this demo, we'll just print out a message about it</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; logAlert(myNodeName, myZone, alert);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; // In case of FIRE, Shut down everything and alert emergency crews w/LCD</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; if (alert == SmartCityNode::FIRE) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.clear();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.setCursor(0, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.print(&quot;ALERT;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.setCursor(0, 1);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.print(&quot;FIRE&nbsp; &nbsp; &nbsp;&nbsp; //</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; digitalWrite(powerPin, HIGH);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; digitalWrite(enablePin, LOW);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; delay(10000);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">}</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; if (alert == SmartCityNode::FLOOD){</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; digitalWrite(powerPin, LOW);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; airOnTime = millis();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.clear();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(0, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;ALERT;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(0, 1);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;FLOODD ON&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; if (millis() - airOnTime &gt;= 25000) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; digitalWrite(powerPin, HIGH);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//}</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">if (millis() - previousMillis &gt;= 60000) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">previousMillis = millis();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">dayVal = !dayVal;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">if (dayVal == false) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; Serial.println(&quot;Night Time&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; } else if (dayVal == true) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; Serial.println(&quot;Day Time&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">}</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">if (dayVal == false) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; digitalWrite(ledPin, LOW);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; myservo.write(90);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; } else {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //Serial.println(&quot;Day Time&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; photoVal = analogRead(photoPin);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; if (photoVal &lt;= 700) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; digitalWrite(ledPin, HIGH);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; } else {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; digitalWrite(ledPin, LOW);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //read in value from temp sensor</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; sensorVal = analogRead(sensorPin);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; // the following sequence of code that converts analog values to temp in degrees</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //Fahrenheit is from the Adafuit example linked above</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //convert temp sensor value to Voltage</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; Voltage = sensorVal * (5000/1024);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //Convert Voltage value to Celcius and then Fahrenheit temp</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; tempC = (Voltage - 500) / 10;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; tempF = (tempC * (9/5)) + 32;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //Print degrees in tempF to console</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //Serial.print(tempF);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //Serial.println(&quot; Degrees Fahrenheit&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //Categorize temp within 3 intervals (above 52deg., within 49-52 degrees, below 49)</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; if (tempF &gt; 54) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; intervalNumber = 1;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; } else if (tempF &gt; 50 &amp;&amp; tempF &lt;= 54){</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; intervalNumber = 2;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; } else {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; intervalNumber = 3;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //Serial.println(intervalNumber);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //test to se whether interval value has changed</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; if (intervalNumber != previousIntervalNum) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; previousIntervalNum = intervalNumber;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; previousTime = millis();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //test to see if interval value has stayed the same for more than 5 seconds</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //if it has, set the position of the microservo to the corresponding angle</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; if ((millis() - previousTime) &gt; 5000) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; Serial.println(intervalNumber);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if (intervalNumber == 3) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myservo.write(90);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(15,1);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lcd.print (&quot;ROOF CLOSED&quot;);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; } else if (intervalNumber == 2) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myservo.write(45);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(15,1);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lcd.print (&quot;ROOF OPEN&quot;);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; } else if (intervalNumber == 1) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myservo.write(0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(15,1);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lcd.print (&quot;ROOF FULLY OPEN&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; digitalWrite(motor1Pin, LOW);&nbsp;&nbsp; // set leg 1 of the H-bridge low</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; digitalWrite(motor2Pin, HIGH); // set leg 2 of the H-bridge high</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; if (dayVal == true &amp;&amp; millis() - previousWaterMillis &gt;= 20000) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; previousWaterMillis = millis();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; enablePinState = !enablePinState;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; if (enablePinState == 1) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; waterOnTime = millis();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; Serial.println(&quot;water on&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.clear();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; if (dayVal == false){</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(1, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;GOODT!&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(15, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(tempF);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;'F&nbsp;&nbsp; } else if (dayVal == true){</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(1, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;GOODING!&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(15, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(tempF);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;'F&nbsp;&nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.setCursor(1, 1);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.print(&quot;WATER;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; if (millis() - waterOnTime &gt;= 3000) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; enablePinState = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; if (millis() - waterOnTime == 3000) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; Serial.println(&quot;water off&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.clear();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; if (dayVal == false){</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(1, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;GOODT!&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(15, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; lcd.print(tempF);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;'F&nbsp;&nbsp; } else if (dayVal == true){</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(1, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;GOODING!&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(15, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(tempF);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;'F&nbsp;&nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; lcd.setCursor(1, 1);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.print(&quot;WATER);&nbsp; &nbsp; &nbsp; </span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; digitalWrite(enablePin, enablePinState);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; //Serial.println(enablePinState);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; currentLcdMillis = millis();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; if (currentLcdMillis - previousLcdMillis &gt;= 400) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp;&nbsp; previousLcdMillis = millis();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; lcd.scrollDisplayLeft();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; //lcd.clear();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">}</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">void logAlert (String myName, int zone, int alert) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">// just blink the led and write a message out to the serial monitor</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">digitalWrite(ledPin, HIGH);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.print(&quot;*** alert received at &quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">float sec = millis() / 1000.0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.println(sec);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.print(&quot;***&nbsp;&nbsp; node = ^&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.print(myName);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.print(&quot;^ in zone # &quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.print(zone);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.print(&quot;: &quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.println(myNode.zoneName(zone));</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.print(&quot;***&nbsp;&nbsp; alert = &quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.print(alert);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.print(&quot;: &quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.println(myNode.alertName(alert));</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">// end of the blink</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">digitalWrite(ledPin, LOW);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">}</span></p>
                          </div>
                        </div>

                        <!-- Unnamed (Rectangle) -->
                        <div id="u71" class="ax_default paragraph">
                          <div id="u71_div" class=""></div>
                          <div id="u71_text" class="text ">
                            <p style="font-size:20px;"><span style="font-family:'CormorantGaramond-Bold', 'Cormorant Garamond Bold', 'Cormorant Garamond';font-weight:700;">Description</span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;">The Smart Greenhouse is designed to harness the energy of the sun to drive the photosynthetic processes at work inside. However, when clouds cover this responsive environment a photocell located outside of the building triggers supplemental lighting to lend a helping hand. A TMP36 temperature sensor sets the position of a micro-servo to open the roof and ventilate in response to excess heat. The plants inside are fed on a schedule created by measuring the passing time in milliseconds, which triggers a 12V peristaltic pump regulated by an h-bridge driver connected to the Arduino Uno’s Vin+ pin. </span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;">&nbsp;&nbsp; </span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;">&nbsp;&nbsp; The Smart Greenhouse also uses one of its digital pins to control the Powerswitch Tail relay, which regulates power from a regular 120V household outlet in order to power a small air pump. The Smart Greenhouse calls the Industrial Zone home and when it receives a flood alert, the air pump is activated to inflate a flotation device located beneath the building. In response to fire, the Smart Greenhouse cuts the power to its utilities to make it safe for fire crews to enter. An LCD Screen outside of the building displays the alerts, as well as state of the Greenhouse, its water pump, its roof, and temperature.</span></p>
                          </div>
                        </div>

                        <!-- Unnamed (Rectangle) -->
                        <div id="u72" class="ax_default paragraph">
                          <div id="u72_div" class=""></div>
                          <div id="u72_text" class="text ">
                            <p style="font-size:20px;"><span style="font-family:'CormorantGaramond-Bold', 'Cormorant Garamond Bold', 'Cormorant Garamond';font-weight:700;">Process Retrospective</span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;">The most challenging part of this project was getting all of the components to fit on the Arduino Uno microprocessor. At first we tried using the Master/Slave and SoftwareSerial examples to connect 2 Arduinos and communicate between them. When we assigned a second serial port, we discovered that we could not simultaneously receive transmissions through the Xbee. We did not have access to an LCD backpack, which would have allowed us to connect the LCD using only 3 pins. Unfortunately, the LCD occupied six of our digital pins and we were barely able to fit everything onto one board. Overall this experience taught us to consider the ways different electrical components would work together, and the power and resources needed to implement our design ideas. In the future, we would like to explore this design with the resources mentioned above and to make the Smart Greenhouse completely reliant on a Real Time schedule.</span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Bold', 'Cormorant Garamond Bold', 'Cormorant Garamond';font-weight:700;">Helpful Links</span><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;">: Below are a few of the information resources we referred to throughout the project. I hope we have encouraged you to explore your own Smart Building. Thanks for visiting!</span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><a id="u73" class="link"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;color:#4B2E83;">https://www.arduino.cc/en/Tutorial/BlinkWithoutDelay</span></a></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><a id="u74" class="link"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;color:#4B2E83;">http://arduino.stackexchange.com/questions/9115/how-to-add-hysteresis-to-threshold-values</span></a></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><a id="u75" class="link"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;color:#4B2E83;">https://www.arduino.cc/en/Reference/SoftwareSerialExample</span></a></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><a id="u76" class="link"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;color:#4B2E83;">https://www.arduino.cc/en/Tutorial/HelloWorld</span></a></p>
                          </div>
                        </div>

                        <!-- Unnamed (Rectangle) -->
                        <div id="u77" class="ax_default paragraph ax_default_unplaced" style="display:none; visibility: hidden">
                          <div id="u77_div" class=""></div>
                          <div id="u77_text" class="text ">
                            <p><span>The Smart City Greenhouse is a physical computing project that responds to changes in the environment and the needs of living plants. I participated in the design and implementation with one other team member, </span><a id="u78" class="link"><span style="color:#0000FF;">Zhuo Luo</span></a><span>. </span></p>
                          </div>
                        </div>

                        <!-- Unnamed (Rectangle) -->
                        <div id="u79" class="ax_default paragraph ax_default_unplaced" style="display:none; visibility: hidden">
                          <div id="u79_div" class=""></div>
                          <div id="u79_text" class="text ">
                            <p style="font-size:20px;"><span style="font-family:'CormorantGaramond-Bold', 'Cormorant Garamond Bold', 'Cormorant Garamond';font-weight:700;">Implementation</span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;">The Smart Greenhouse receives alert messages from the Smart City gateway library, designed and implemented by Andrew Davidson. This is made possible using an Xbee wireless transmitter/receiver. The transmitter/receiver uses pins 0 and 1, which serve as a serial port for incoming data. Adafruit calls the Powerswitch Tail “a safer alternative to wiring up your own relays”. It switches 120V AC power using a microcontroller i/o pin and is rated between 3-12V DC and between 3-30 milliamps. We used one of our non-PWM pins to control the relay, and hence the small aquatic air-pump it was plugged into, in order to inflate a raft beneath the structure. This was as simple as the Blink example from the Arduino Example library, and an “if” statement that waited for the alert to be read. The peristaltic pump uses 12V of electricity. To run it we used an h-bridge motor driver and wired it to the Vin+ pin following an example tutorial from NYU’s ITP Physical Computing page.</span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;">&nbsp;&nbsp; &nbsp; To measure ambient sunlight , we used a photocell and set a threshold value at around 700 analog output, just over half of the sensor’s maximum value. Using this threshold value in another “if” statement, the photocell sensor activates a series of 3 LEDs that are run off of a single digital pin. We used TMP36 analog temperature sensor wired to one of the analog input pins to tell the micro-servo when to ventilate the structure by raising part of its rooftop or to conserve energy by lowering or closing it. We used example Arduino code similar to this example from Adafruit to convert these values, first to voltage, then to degrees Celsius and finally degrees Fahrenheit. We then created 3 values that correspond with predetermined temperature intervals. Monitoring for changes in these interval values, the micro servo responds by lifting the roof fully when the Greenhouse exceeds temperatures of 54 degrees, half way when temps are between 50 and 54 degrees, and closes when the temp drops to 49 degrees or below. To smooth out this transition, the micro-servo only responds if the interval value has not changed for at least 5 seconds. Using an LCD screen, our Smart Greenhouse displays either a “Good Morning” message or “Good Night”. It displays “Water On” when the peristaltic pump is running, and “Water Off” when it has finished. It also displays the temperature and roof state after it has changed. In the case that the Greenhouse receives a Flood alert, the LCD screen displays the message “Alert!!! Flood, Hold On” and the case of Fire, simply reads “Alert!!! Fire”.</span></p>
                          </div>
                        </div>

                        <!-- Unnamed (Image) -->
                        <div id="u80" class="ax_default image ax_default_unplaced" style="display:none; visibility: hidden">
                          <img id="u80_img" class="img " src="resources/images/transparent.gif"/>
                        </div>

                        <!-- Unnamed (Image) -->
                        <div id="u81" class="ax_default image ax_default_unplaced" style="display:none; visibility: hidden">
                          <img id="u81_img" class="img " src="resources/images/transparent.gif"/>
                        </div>

                        <!-- Unnamed (Image) -->
                        <div id="u82" class="ax_default image ax_default_unplaced" style="display:none; visibility: hidden">
                          <img id="u82_img" class="img " src="resources/images/transparent.gif"/>
                        </div>

                        <!-- Unnamed (Rectangle) -->
                        <div id="u83" class="ax_default paragraph ax_default_unplaced" style="display:none; visibility: hidden">
                          <div id="u83_div" class=""></div>
                          <div id="u83_text" class="text ">
                            <p style="font-size:20px;"><span style="font-family:'CormorantGaramond-Bold', 'Cormorant Garamond Bold', 'Cormorant Garamond';font-weight:700;">Software</span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;">Because we had difficulty integrating a Real Time Clock into our build, we relied on measuring the time, in milliseconds, between passing events such as the day and night time functions, which we set at 60 seconds each in order to demonstrate our project in a brief setting. We did this by assigning an unsigned long to the initial timing of an event, and then resetting the value after using it to measure the duration of passing time between the component’s next state. Because we had so many separately timed parts, there are at least 2 unsigned longs associated with each working part. We also created separate “if” statement clauses to handle the Smart City Alerts independent of the other logical steps. In the case of Fire, the “if” statement overrides any other activity and resumes several seconds later.</span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;text-decoration:underline;">Sketch Code</span><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;">: Due to its length the sketch code is located at the end of this entry, after the “Helpful Links” section.</span></p>
                          </div>
                        </div>

                        <!-- Unnamed (Image) -->
                        <div id="u84" class="ax_default image ax_default_unplaced" style="display:none; visibility: hidden">
                          <img id="u84_img" class="img " src="resources/images/transparent.gif"/>
                        </div>

                        <!-- Unnamed (Rectangle) -->
                        <div id="u85" class="ax_default paragraph ax_default_unplaced" style="display:none; visibility: hidden">
                          <div id="u85_div" class=""></div>
                          <div id="u85_text" class="text ">
                            <p style="font-size:14px;"><span style="font-family:'CormorantGaramond-Bold', 'Cormorant Garamond Bold', 'Cormorant Garamond';font-weight:700;font-size:20px;">Sketch Code</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">#include &lt;Servo.h&gt;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">#include &lt;LiquidCrystal.h&gt;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">#include &lt;SmartCityNodeLib.h&gt;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">LiquidCrystal lcd(12, 11, 7, 6, 5, 4);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">SmartCityNode myNode;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">SoftwareSerial mySerial(10,9);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Servo myservo;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">const int sensorPin = A0; //Temperature Sensor</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">const int photoPin = A1; //Photocell</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">const int ledPin = A3; // LED’s</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">const int motor1Pin = 8;&nbsp;&nbsp; // H-bridge leg 1 (pin 2, 1A)</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">const int enablePin = 9;&nbsp;&nbsp; // H-bridge leg 2 (pin 7, 2A)</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">const int motor2Pin = 10;&nbsp;&nbsp; // H-bridge enable pin</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">const int powerPin = 13;&nbsp;&nbsp; //Powerswitch Relay 120v</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int photoVal = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//int ledoutVal = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int sensorVal = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int Voltage = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int tempF = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int tempC = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int outVal = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int lastTemp = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int intervalNumber = 0; //Arbitrary numbers for separate temperature intervals</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int previousIntervalNum = 0; //variable for previous interval number to monitor for change</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int enablePinState = HIGH; //variable for switching the h-bridge on and off</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long previousTime = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long prevpowerTime = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long currentMillis = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long previousMillis = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long currentWaterMillis = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long previousWaterMillis = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long airOnTime = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long previousAirMillis = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long waterOnTime = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long currentLcdMillis = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">unsigned long previousLcdMillis = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int powerPinState = HIGH; //variable for switching the powerswitch tail on and off</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">long tempInterval = 5000; //Interval of time that must pass w/temp interval unchanged&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">bool dayVal = true; //Variable for switching between night and day functions</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//some constants to identify my node to the library object</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">const String myNodeName = &quot;Andy's Office&quot;;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">const int myZone = SmartCityNode::INDUSTRIAL; // declare what zone you are</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//const int btnPin = 7;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//set up a button to use for input</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//Button button(btnPin);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//state variables</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">boolean myDebugging = true;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">void setup() {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">// just for our own debugging</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.begin(9600);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.println(&quot;\n\n*** Starting SmartCityNode demo&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">myservo.attach(A2);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">pinMode(ledPin, OUTPUT);&nbsp; &nbsp; &nbsp; </span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">pinMode(motor1Pin, OUTPUT);&nbsp;&nbsp; //These variable assignments are taken directly from</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">pinMode(motor2Pin, OUTPUT);&nbsp; &nbsp; //the NYU example mentioned above</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">pinMode(enablePin, OUTPUT);&nbsp; &nbsp;&nbsp; //</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">pinMode(ledPin, OUTPUT);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">pinMode(powerPin, OUTPUT);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">// set enablePin high so that motor can turn on:</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//digitalWrite(enablePin, HIGH);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">// just flash it for a second at startup so we know things have initialized</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">digitalWrite(ledPin, HIGH);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">delay(1000);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">digitalWrite(ledPin, LOW);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">// comment this line out to suppress debugging messages from the library</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">myNode.setDebugOn();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">myNode.begin(myZone, myNodeName);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//Initialize LCD with indication of daytime function</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">lcd.begin(20, 2);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">lcd.print(&quot;GOODING!&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">lcd.setCursor(1,1);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">lcd.print(&quot;WATER;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">}</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">void loop() {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">// check for an incoming alert</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">// alertReceived() returns 0 (zero) if none have been sent to your zone.</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">// it returns a code as follows if there is one:</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::FIRE</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::GAS</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::FLOOD</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::BURGLARY</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::EARTHQUAKE</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::ZOMBIE</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::CONTAINMENT_BREACH</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::HIPSTER_INVASION</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::UNWANTED_SOLICITORS</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::BLACK_FRIDAY</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::CUTE_ANIMALS</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp; &nbsp;&nbsp; SmartCityNode::APOCALYPSE</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">int alert = myNode.alertReceived();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//while (alert != SmartCityNode::FIRE) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">if (alert != 0) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//&nbsp; &nbsp;&nbsp; in this demo, we'll just print out a message about it</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; logAlert(myNodeName, myZone, alert);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; // In case of FIRE, Shut down everything and alert emergency crews w/LCD</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; if (alert == SmartCityNode::FIRE) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.clear();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.setCursor(0, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.print(&quot;ALERT;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.setCursor(0, 1);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.print(&quot;FIRE&nbsp; &nbsp; &nbsp;&nbsp; //</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; digitalWrite(powerPin, HIGH);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; digitalWrite(enablePin, LOW);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; delay(10000);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">}</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; if (alert == SmartCityNode::FLOOD){</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; digitalWrite(powerPin, LOW);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; airOnTime = millis();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.clear();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(0, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;ALERT;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(0, 1);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;FLOODD ON&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; if (millis() - airOnTime &gt;= 25000) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; digitalWrite(powerPin, HIGH);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">//}</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">if (millis() - previousMillis &gt;= 60000) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">previousMillis = millis();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">dayVal = !dayVal;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">if (dayVal == false) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; Serial.println(&quot;Night Time&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; } else if (dayVal == true) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; Serial.println(&quot;Day Time&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">}</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">if (dayVal == false) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; digitalWrite(ledPin, LOW);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; myservo.write(90);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; } else {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //Serial.println(&quot;Day Time&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; photoVal = analogRead(photoPin);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; if (photoVal &lt;= 700) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; digitalWrite(ledPin, HIGH);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; } else {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; digitalWrite(ledPin, LOW);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //read in value from temp sensor</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; sensorVal = analogRead(sensorPin);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; // the following sequence of code that converts analog values to temp in degrees</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //Fahrenheit is from the Adafuit example linked above</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //convert temp sensor value to Voltage</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; Voltage = sensorVal * (5000/1024);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //Convert Voltage value to Celcius and then Fahrenheit temp</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; tempC = (Voltage - 500) / 10;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; tempF = (tempC * (9/5)) + 32;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //Print degrees in tempF to console</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //Serial.print(tempF);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //Serial.println(&quot; Degrees Fahrenheit&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //Categorize temp within 3 intervals (above 52deg., within 49-52 degrees, below 49)</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; if (tempF &gt; 54) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; intervalNumber = 1;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; } else if (tempF &gt; 50 &amp;&amp; tempF &lt;= 54){</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; intervalNumber = 2;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; } else {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; intervalNumber = 3;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //Serial.println(intervalNumber);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //test to se whether interval value has changed</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; if (intervalNumber != previousIntervalNum) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; previousIntervalNum = intervalNumber;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; previousTime = millis();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //test to see if interval value has stayed the same for more than 5 seconds</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; //if it has, set the position of the microservo to the corresponding angle</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; if ((millis() - previousTime) &gt; 5000) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; Serial.println(intervalNumber);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if (intervalNumber == 3) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myservo.write(90);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(15,1);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lcd.print (&quot;ROOF CLOSED&quot;);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; } else if (intervalNumber == 2) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myservo.write(45);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(15,1);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lcd.print (&quot;ROOF OPEN&quot;);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; } else if (intervalNumber == 1) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myservo.write(0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(15,1);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lcd.print (&quot;ROOF FULLY OPEN&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; digitalWrite(motor1Pin, LOW);&nbsp;&nbsp; // set leg 1 of the H-bridge low</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; digitalWrite(motor2Pin, HIGH); // set leg 2 of the H-bridge high</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; if (dayVal == true &amp;&amp; millis() - previousWaterMillis &gt;= 20000) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; previousWaterMillis = millis();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; enablePinState = !enablePinState;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; if (enablePinState == 1) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; waterOnTime = millis();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; Serial.println(&quot;water on&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.clear();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; if (dayVal == false){</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(1, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;GOODT!&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(15, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(tempF);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;'F&nbsp;&nbsp; } else if (dayVal == true){</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(1, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;GOODING!&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(15, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(tempF);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;'F&nbsp;&nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.setCursor(1, 1);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.print(&quot;WATER;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; if (millis() - waterOnTime &gt;= 3000) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; enablePinState = 0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; if (millis() - waterOnTime == 3000) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; Serial.println(&quot;water off&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.clear();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; if (dayVal == false){</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(1, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;GOODT!&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(15, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; lcd.print(tempF);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;'F&nbsp;&nbsp; } else if (dayVal == true){</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(1, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;GOODING!&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.setCursor(15, 0);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(tempF);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; lcd.print(&quot;'F&nbsp;&nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; lcd.setCursor(1, 1);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; &nbsp; lcd.print(&quot;WATER);&nbsp; &nbsp; &nbsp; </span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; digitalWrite(enablePin, enablePinState);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; //Serial.println(enablePinState);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; currentLcdMillis = millis();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; if (currentLcdMillis - previousLcdMillis &gt;= 400) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp;&nbsp; previousLcdMillis = millis();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; &nbsp; lcd.scrollDisplayLeft();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; }</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">&nbsp;&nbsp; //lcd.clear();</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">}</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">void logAlert (String myName, int zone, int alert) {</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">// just blink the led and write a message out to the serial monitor</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">digitalWrite(ledPin, HIGH);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.print(&quot;*** alert received at &quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">float sec = millis() / 1000.0;</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.println(sec);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.print(&quot;***&nbsp;&nbsp; node = ^&quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.print(myName);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.print(&quot;^ in zone # &quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.print(zone);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.print(&quot;: &quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.println(myNode.zoneName(zone));</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.print(&quot;***&nbsp;&nbsp; alert = &quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.print(alert);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.print(&quot;: &quot;);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">Serial.println(myNode.alertName(alert));</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">// end of the blink</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">digitalWrite(ledPin, LOW);</span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'Courier';font-weight:400;">}</span></p>
                          </div>
                        </div>

                        <!-- Unnamed (Rectangle) -->
                        <div id="u86" class="ax_default paragraph ax_default_unplaced" style="display:none; visibility: hidden">
                          <div id="u86_div" class=""></div>
                          <div id="u86_text" class="text ">
                            <p style="font-size:20px;"><span style="font-family:'CormorantGaramond-Bold', 'Cormorant Garamond Bold', 'Cormorant Garamond';font-weight:700;">Description</span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;">The Smart Greenhouse is designed to harness the energy of the sun to drive the photosynthetic processes at work inside. However, when clouds cover this responsive environment a photocell located outside of the building triggers supplemental lighting to lend a helping hand. A TMP36 temperature sensor sets the position of a micro-servo to open the roof and ventilate in response to excess heat. The plants inside are fed on a schedule created by measuring the passing time in milliseconds, which triggers a 12V peristaltic pump regulated by an h-bridge driver connected to the Arduino Uno’s Vin+ pin. </span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;">&nbsp;&nbsp; </span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;">&nbsp;&nbsp; The Smart Greenhouse also uses one of its digital pins to control the Powerswitch Tail relay, which regulates power from a regular 120V household outlet in order to power a small air pump. The Smart Greenhouse calls the Industrial Zone home and when it receives a flood alert, the air pump is activated to inflate a flotation device located beneath the building. In response to fire, the Smart Greenhouse cuts the power to its utilities to make it safe for fire crews to enter. An LCD Screen outside of the building displays the alerts, as well as state of the Greenhouse, its water pump, its roof, and temperature.</span></p>
                          </div>
                        </div>

                        <!-- Unnamed (Rectangle) -->
                        <div id="u87" class="ax_default paragraph ax_default_unplaced" style="display:none; visibility: hidden">
                          <div id="u87_div" class=""></div>
                          <div id="u87_text" class="text ">
                            <p style="font-size:20px;"><span style="font-family:'CormorantGaramond-Bold', 'Cormorant Garamond Bold', 'Cormorant Garamond';font-weight:700;">Process Retrospective</span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;">The most challenging part of this project was getting all of the components to fit on the Arduino Uno microprocessor. At first we tried using the Master/Slave and SoftwareSerial examples to connect 2 Arduinos and communicate between them. When we assigned a second serial port, we discovered that we could not simultaneously receive transmissions through the Xbee. We did not have access to an LCD backpack, which would have allowed us to connect the LCD using only 3 pins. Unfortunately, the LCD occupied six of our digital pins and we were barely able to fit everything onto one board. Overall this experience taught us to consider the ways different electrical components would work together, and the power and resources needed to implement our design ideas. In the future, we would like to explore this design with the resources mentioned above and to make the Smart Greenhouse completely reliant on a Real Time schedule.</span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Bold', 'Cormorant Garamond Bold', 'Cormorant Garamond';font-weight:700;">Helpful Links</span><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;">: Below are a few of the information resources we referred to throughout the project. I hope we have encouraged you to explore your own Smart Building. Thanks for visiting!</span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><a id="u88" class="link"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;color:#0000FF;">https://www.arduino.cc/en/Tutorial/BlinkWithoutDelay</span></a></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><a id="u89" class="link"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;color:#0000FF;">http://arduino.stackexchange.com/questions/9115/how-to-add-hysteresis-to-threshold-values</span></a></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><a id="u90" class="link"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;color:#0000FF;">https://www.arduino.cc/en/Reference/SoftwareSerialExample</span></a></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;"><br></span></p><p style="font-size:18px;"><a id="u91" class="link"><span style="font-family:'CormorantGaramond-Regular', 'Cormorant Garamond';font-weight:400;color:#0000FF;">https://www.arduino.cc/en/Tutorial/HelloWorld</span></a></p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Centered Logo  (Dynamic Panel) -->
      <div id="u92" class="ax_default ax_default_unplaced" data-label="Centered Logo " style="display:none; visibility: hidden">
        <div id="u92_state0" class="panel_state" data-label="State1" style="">
          <div id="u92_state0_content" class="panel_state_content">

            <!-- Unnamed (Rectangle) -->
            <div id="u93" class="ax_default link_button ax_default_unplaced" style="display:none; visibility: hidden">
              <div id="u93_div" class=""></div>
              <div id="u93_text" class="text ">
                <p><span>Samuel Marks Design</span></p>
              </div>
            </div>

            <!-- Unnamed (Image) -->
            <div id="u94" class="ax_default image ax_default_unplaced" style="display:none; visibility: hidden">
              <img id="u94_img" class="img " src="resources/images/transparent.gif"/>
            </div>
          </div>
        </div>
      </div>

      <!-- Main Navigation Page (Dynamic Panel) -->
      <div id="u95" class="ax_default" data-label="Main Navigation Page">
        <div id="u95_state0" class="panel_state" data-label="State1" style="">
          <div id="u95_state0_content" class="panel_state_content">

            <!-- About (Rectangle) -->
            <div id="u96" class="ax_default link_button" data-label="About" selectiongroup="Main Nav Expanded">
              <div id="u96_div" class=""></div>
              <div id="u96_text" class="text ">
                <p><span>ABOUT</span></p>
              </div>
            </div>

            <!-- Resume (Rectangle) -->
            <div id="u97" class="ax_default link_button" data-label="Resume" selectiongroup="Main Nav Expanded">
              <div id="u97_div" class=""></div>
              <div id="u97_text" class="text ">
                <p><span>RESUMÉ</span></p>
              </div>
            </div>

            <!-- Projects (Rectangle) -->
            <div id="u98" class="ax_default link_button" data-label="Projects" selectiongroup="Main Nav Expanded">
              <div id="u98_div" class=""></div>
              <div id="u98_text" class="text ">
                <p><span>PROJECTS</span></p>
              </div>
            </div>

            <!-- Process (Rectangle) -->
            <div id="u99" class="ax_default link_button" data-label="Process" selectiongroup="Main Nav Expanded">
              <div id="u99_div" class=""></div>
              <div id="u99_text" class="text ">
                <p><span>PROCESS</span></p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Project Title 2 (Rectangle) -->
      <div id="u100" class="ax_default heading_1 ax_default_unplaced" data-label="Project Title 2" style="display:none; visibility: hidden">
        <div id="u100_div" class=""></div>
        <div id="u100_text" class="text ">
          <p><span>SMART CITY </span></p><p><span>GREENHOUSE</span></p>
        </div>
      </div>

      <!-- Unnamed (Tab/Mobile Nav) -->

      <!-- Unnamed (Dynamic Panel) -->
      <div id="u102" class="ax_default ax_default_unplaced" style="display:none; visibility: hidden">
        <div id="u102_state0" class="panel_state" data-label="State1" style="">
          <div id="u102_state0_content" class="panel_state_content">

            <!-- Unnamed (Rectangle) -->
            <div id="u103" class="ax_default label ax_default_unplaced" style="display:none; visibility: hidden">
              <div id="u103_div" class=""></div>
              <div id="u103_text" class="text ">
                <p><span></span></p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Ham Nav (Dynamic Panel) -->
      <div id="u104" class="ax_default ax_default_unplaced" data-label="Ham Nav" style="display:none; visibility: hidden">
        <div id="u104_state0" class="panel_state" data-label="State1" style="">
          <div id="u104_state0_content" class="panel_state_content">

            <!-- Ham Nav Menu (Dynamic Panel) -->
            <div id="u105" class="ax_default" data-label="Ham Nav Menu">
              <div id="u105_state0" class="panel_state" data-label="State1" style="">
                <div id="u105_state0_content" class="panel_state_content">

                  <!-- Mobile Nav (Group) -->
                  <div id="u106" class="ax_default" data-label="Mobile Nav" data-left="175" data-top="41" data-width="63" data-height="167">

                    <!-- Unnamed (Rectangle) -->
                    <div id="u107" class="ax_default link_button" selectiongroup="u101Ham Nav">
                      <div id="u107_div" class=""></div>
                      <div id="u107_text" class="text ">
                        <p><span>Home</span></p>
                      </div>
                    </div>

                    <!-- Unnamed (Rectangle) -->
                    <div id="u108" class="ax_default link_button" selectiongroup="u101Ham Nav">
                      <img id="u108_img" class="img " src="images/home/u40.png"/>
                      <div id="u108_text" class="text ">
                        <p><span>About</span></p>
                      </div>
                    </div>

                    <!-- Unnamed (Rectangle) -->
                    <div id="u109" class="ax_default link_button" selectiongroup="u101Ham Nav">
                      <img id="u109_img" class="img " src="images/home/u41.png"/>
                      <div id="u109_text" class="text ">
                        <p><span>Process</span></p>
                      </div>
                    </div>

                    <!-- Unnamed (Rectangle) -->
                    <div id="u110" class="ax_default link_button" selectiongroup="u101Ham Nav">
                      <img id="u110_img" class="img " src="images/home/u42.png"/>
                      <div id="u110_text" class="text ">
                        <p><span>Résumé</span></p>
                      </div>
                    </div>

                    <!-- Unnamed (Rectangle) -->
                    <div id="u111" class="ax_default link_button" selectiongroup="u101Ham Nav">
                      <img id="u111_img" class="img " src="images/home/u43.png"/>
                      <div id="u111_text" class="text ">
                        <p><span>Projects</span></p>
                      </div>
                    </div>
                  </div>

                  <!-- Mobile Menu Close (Group) -->
                  <div id="u112" class="ax_default" data-label="Mobile Menu Close" data-left="213.832738110422" data-top="-3.66726188957801" data-width="24.167261889578" data-height="26.667261889578">

                    <!-- Unnamed (Rectangle) -->
                    <div id="u113" class="ax_default box_1">
                      <div id="u113_div" class=""></div>
                    </div>

                    <!-- Unnamed (Shape) -->
                    <div id="u114" class="ax_default line">
                      <img id="u114_img" class="img " src="images/home/u46.png"/>
                    </div>

                    <!-- Unnamed (Shape) -->
                    <div id="u115" class="ax_default line">
                      <img id="u115_img" class="img " src="images/home/u46.png"/>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Unnamed (Footer) -->

      <!-- Footer 2 (Dynamic Panel) -->
      <div id="u117" class="ax_default" data-label="Footer 2">
        <div id="u117_state0" class="panel_state" data-label="State1" style="">
          <div id="u117_state0_content" class="panel_state_content">

            <!-- Unnamed (Group) -->
            <div id="u118" class="ax_default" data-left="0" data-top="8" data-width="299" data-height="40">

              <!-- Unnamed (Rectangle) -->
              <div id="u119" class="ax_default label">
                <div id="u119_div" class=""></div>
                <div id="u119_text" class="text ">
                  <p><span>© 2018 Samuel Marks Design.</span></p>
                </div>
              </div>

              <!-- Unnamed (Rectangle) -->
              <div id="u120" class="ax_default label">
                <div id="u120_div" class=""></div>
                <div id="u120_text" class="text ">
                  <p><a id="u121" class="link"><span>samuelmarks@samuelmarksdesign.com</span></a><span> </span><span style="color:#FF0000;">|</span><span> </span><a id="u122" class="link"><span>LinkedIn</span></a></p>
                </div>
              </div>

              <!-- Unnamed (Horizontal Line) -->
              <div id="u123" class="ax_default line">
                <img id="u123_img" class="img " src="images/smart_city_greenhouse/u123.png"/>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Logo (Dynamic Panel) -->
      <div id="u124" class="ax_default" data-label="Logo">
        <div id="u124_state0" class="panel_state" data-label="State1" style="">
          <div id="u124_state0_content" class="panel_state_content">

            <!-- Unnamed (Group) -->
            <div id="u125" class="ax_default" data-left="0" data-top="0" data-width="258" data-height="45">

              <!-- Unnamed (Rectangle) -->
              <div id="u126" class="ax_default link_button">
                <div id="u126_div" class=""></div>
                <div id="u126_text" class="text ">
                  <p><span>Samuel Marks Design</span></p>
                </div>
              </div>

              <!-- Unnamed (Image) -->
              <div id="u127" class="ax_default image">
                <img id="u127_img" class="img " src="images/smart_city_greenhouse/u127.png"/>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
